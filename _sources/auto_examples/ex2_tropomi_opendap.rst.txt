
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/ex2_tropomi_opendap.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_ex2_tropomi_opendap.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_ex2_tropomi_opendap.py:


TropOMI L3 OpenDAP
==================

This script is designed to create a custom L3 file from TropOMI NO2 files
streamed remotely from an OpenDAP server. OpenDAP access to TropOMI data
requires that you:

- Configure `.netrc`, `.urs_cookies`, and `.dodsrc` (see example)
- accept the "NASA GESDISC DATA ARCHIVE" and "Sentinel" End User License
  Agreements (EULAs) on urs.earthdata.nasa.gov using the username and password.

This example can be edited to work with TropOMI HCHO, VIIRS_AERDB, OMI OMNO2,
OMI OMHCHO, ..., etc. The non-TropOMI products do not require the Sentinal
EULA.

.. GENERATED FROM PYTHON SOURCE LINES 17-19

Import Library and Configure
----------------------------

.. GENERATED FROM PYTHON SOURCE LINES 19-30

.. code-block:: Python

    import cmaqsatproc as csp

    # Using common EPA Lambert Conic Conformal 12-km grid
    GDNAM = '12US1'
    # Doing just one day
    date='2019-07-24'
    # Using TropOMINO2 reader
    readername = 'TropOMINO2' # or TropOMIHCHO, AERDB_L2_VIIRS_SNPP, ...
    # Defining output path
    outpath = f'{readername}_{date}_{GDNAM}.nc'


.. GENERATED FROM PYTHON SOURCE LINES 31-33

Use NASA's CMR to find and process files
----------------------------------------

.. GENERATED FROM PYTHON SOURCE LINES 33-45

.. code-block:: Python


    # Get a CMAQ grid definition
    cg = csp.open_griddesc(GDNAM)
    # Get the Satellite Reader object
    satreader = csp.reader_dict[readername]
    # Use CMAQ grid definition and date to drive cmr query
    l3 = satreader.cmr_to_level3(
        temporal=f'{date}T00:00:00Z/{date}T23:59:59Z',
        bbox=cg.csp.bbox(), grid=cg.csp.geodf, verbose=9
    )
    # Save file to disk
    l3.to_netcdf(outpath)


.. _sphx_glr_download_auto_examples_ex2_tropomi_opendap.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: ex2_tropomi_opendap.ipynb <ex2_tropomi_opendap.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: ex2_tropomi_opendap.py <ex2_tropomi_opendap.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: ex2_tropomi_opendap.zip <ex2_tropomi_opendap.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
